<!-- TOC depthFrom:1 depthTo:3 insertAnchor:false orderedList:false -->

- [PS版DQ7 イノゴン戦シミュレータ](#ps版dq7-イノゴン戦シミュレータ)
  - [使い方](#使い方)
  - [出力の例](#出力の例)
    - [`$option[:N] = 10000`](#optionn--10000)
    - [`$option[:log_timing] = :turn`](#optionlog_timing--turn)
    - [`$option[:log_timing] = :result`](#optionlog_timing--result)
  - [ToDo](#todo)

<!-- /TOC -->

# PS版DQ7 イノゴン戦シミュレータ

PS版DQ7RTAにおいて最も勝率が低いとされている戦闘であるイノゴン戦の勝率を楽して見極めるために**今更**作ったやつ。[RGPツクールVX Ace](https://store.steampowered.com/app/220700/RPG_Maker_VX_Ace/)のスクリプトRGSS3を元にしています。

現在対応しているのは、
- [腹黒パンダ氏の戦術](https://harapan.exblog.jp/15510551/)([装備種配分](https://github.com/pingval/DQ7/raw/master/psdq7-status.zip))
- [自分の戦術](https://github.com/pingval/DQ7/blob/master/pingval-psdq7-Aira183-chart.txt#L1649)([装備種配分](https://github.com/pingval/DQ7/raw/master/psdq7-status.zip))

## 使い方

`Ruby psdq7_InoGon_simulator.rb`

$optionをいろいろ書き換えていろいろやる。

## 出力の例

### `$option[:N] = 10000`
10000回試行。

```
N = 10000
Maribel's Level = 10

Win rate:	73.56%
* Win
  Ave. turn count: 21.26
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end          12.81%     6.63%     6.10%
    Ave. HP on battle end              45.29     65.27     49.06
    Ave. Herb count                     0.19      1.52       NaN
    Ave. Leaf count                     0.00      0.63      0.50
  Distribution of Leaf count:
        0    22.78%
        1    40.78%
        2    36.43%
    Ave.       1.14
  Troop:
                                        No.1      No.2
    Death rate on battle end         100.00%   100.00%
    Ave. HP on battle end               0.00      0.00

* Lose
  Ave. turn count: 18.69
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end         100.00%   100.00%   100.00%
    Ave. HP on battle end               0.00      0.00      0.00
    Ave. Herb count                     0.22      1.02       NaN
    Ave. Leaf count                     0.00      0.64      0.57
  Distribution of Leaf count:
        0    18.31%
        1    41.72%
        2    39.98%
    Ave.       1.22
  Troop:
                                        No.1      No.2
    Death rate on battle end           3.48%     5.52%
    Ave. HP on battle end             155.88    143.19

* Both
  Ave. turn count: 20.58
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end          35.86%    31.32%    30.93%
    Ave. HP on battle end              33.31     48.01     36.09
    Ave. Herb count                     0.20      1.38       NaN
    Ave. Leaf count                     0.00      0.64      0.52
  Distribution of Leaf count:
        0    21.60%
        1    41.03%
        2    37.37%
    Ave.       1.16
  Troop:
                                        No.1      No.2
    Death rate on battle end          74.48%    75.02%
    Ave. HP on battle end              41.22     37.86
```
### `$option[:log_timing] = :turn`
戦闘ログを1Tごとに出力する。

```
N = 10000
Maribel's Level = 10

   1T:      イノ440/440 |      ゴン400/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム65000/65000
   2T:      イノ417/440 |      ゴン354/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム65000/65000
   3T:      イノ395/440 |      ゴン337/400 |      ガ 59/ 59 |      主 51/ 82 |      マ 57/ 57 |      カシム64965/65000
   4T:      イノ395/440 |      ゴン304/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64964/65000
   5T:      イノ395/440 |      ゴン274/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム64927/65000
   6T:      イノ337/440 |      ゴン255/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム64866/65000
   7T:      イノ312/440 |      ゴン237/400 |      ガ 59/ 59 |      主  7/ 82 |      マ 57/ 57 |      カシム64866/65000
   8T:      イノ286/440 |      ゴン237/400 |      ガ 46/ 59 |      主 76/ 82 |      マ 57/ 57 |      カシム64832/65000
   9T:      イノ261/440 |      ゴン219/400 |      ガ 59/ 59 |      主 76/ 82 |      マ 57/ 57 |      カシム64795/65000
  10T:      イノ239/440 |      ゴン167/400 |      ガ 59/ 59 |      主 52/ 82 |      マ 57/ 57 |      カシム64795/65000
  11T:      イノ216/440 |      ゴン123/400 |      ガ 18/ 59 |      主 63/ 82 |      マ 57/ 57 |      カシム64795/65000
  12T:      イノ180/440 |      ゴン123/400 | [暗5]ガ 52/ 59 | [暗5]主 82/ 82 | [暗4]マ 57/ 57 | [暗5]カシム64723/65000
  13T:      イノ180/440 |      ゴン105/400 | [暗4]ガ 59/ 59 | [暗4]主 52/ 82 | [暗3]マ 57/ 57 | [暗4]カシム64691/65000
  14T:      イノ180/440 |      ゴン 77/400 | [暗3]ガ 59/ 59 | [暗3]主 65/ 82 | [暗2]マ 57/ 57 | [暗3]カシム64657/65000
  15T:      イノ180/440 |      ゴン 77/400 | [暗2]ガ 21/ 59 | [暗2]主 82/ 82 | [暗1]マ 57/ 57 | [暗2]カシム64621/65000
  16T:      イノ180/440 |      ゴン 44/400 | [暗1]ガ 58/ 59 | [暗1]主 82/ 82 |      マ 34/ 57 | [暗1]カシム64526/65000
  17T:      イノ180/440 | [死 ]ゴン  0/400 |      ガ 42/ 59 |      主 10/ 82 |      マ 57/ 57 |      カシム64526/65000
  18T:      イノ148/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64526/65000
  19T:      イノ148/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64486/65000
  20T:      イノ123/440 | [死 ]ゴン  0/400 |      ガ 39/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64486/65000
  21T:      イノ123/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64449/65000
  22T:      イノ 91/440 | [死 ]ゴン  0/400 |      ガ 44/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64449/65000
  23T:      イノ 64/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64449/65000
  24T:      イノ 31/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64449/65000
  25T:      イノ 31/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 | [暗5]カシム64449/65000
  26T:      イノ  3/440 | [死 ]ゴン  0/400 |      ガ 42/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 | [暗4]カシム64449/65000
  27T:      イノ  3/440 | [死 ]ゴン  0/400 |      ガ 55/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 | [暗3]カシム64449/65000
  28T:      イノ  3/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 | [暗2]カシム64449/65000
victory[死 ]イノ  0/440 | [死 ]ゴン  0/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 | [暗1]カシム64449/65000
```

### `$option[:log_timing] = :result`
戦闘ログを最も詳しく出力する。

```
N = 10000
Maribel's Level = 10

   1T:      イノ440/440 |      ゴン400/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム65000/65000
    ガ: 防御
    イノ: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-45 ( 14/ 59)
    ゴン: 爪できりさく to 主
      主: HP-32 ( 50/ 82)
    カシム: 攻撃 to ゴン
      ゴン: HP-27 (373/400)
    マ: 奇跡の石 to ガ
      ガ: HP+30 ( 44/ 59)
    主: ブーメラン to イノ, ゴン
      イノ: HP-21 (419/440)
      ゴン: HP-19 (354/400)
   2T:      イノ419/440 |      ゴン354/400 |      ガ 44/ 59 |      主 50/ 82 |      マ 58/ 58 |      カシム65000/65000
    ガ: 防御
    ゴン: 攻撃 to ガ
      ガ: HP-14 ( 30/ 59)
    イノ: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-87 (64913/65000)
    カシム: 様子を見る
    マ: 奇跡の石 to 主
      主: HP+39 ( 82/ 82)
    主: ブーメラン to イノ, ゴン
      イノ: HP-24 (395/440)
      ゴン: HP-17 (337/400)
   3T:      イノ395/440 |      ゴン337/400 |      ガ 30/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム64913/65000
    ガ: 防御
    ゴン: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-75 (64838/65000)
    イノ: 攻撃 to マ
      マ: evaded
    カシム: 斬りつける to ゴン
      ゴン: HP-37 (300/400)
    マ: 奇跡の石 to ガ
      ガ: HP+33 ( 59/ 59)
    主: ブーメラン to イノ, ゴン
      イノ: HP-24 (371/440)
      ゴン: HP-16 (284/400)
   4T:      イノ371/440 |      ゴン284/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム64838/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: HP-15 ( 44/ 59)
    カシム: 攻撃 to ゴン
      ゴン: HP-30 (254/400)
    ゴン: 爪できりさく to マ
      マ: HP-27 ( 31/ 58)
    マ: 奇跡の石 to ガ
      ガ: HP+39 ( 59/ 59)
    主: ブーメラン to イノ, ゴン
      イノ: HP-20 (351/440)
      ゴン: HP-18 (236/400)
   5T:      イノ351/440 |      ゴン236/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 31/ 58 |      カシム64838/65000
    ガ: 防御
    ゴン: 尻尾 to ガ
      ガ: HP-18 ( 41/ 59)
    イノ: 武器を振り回す to ガ
      ガ: HP-21 ( 20/ 59)
    カシム: 斬りつける to イノ
      イノ: HP-31 (320/440)
    マ: 奇跡の石 to マ
      マ: HP+39 ( 58/ 58)
    主: ブーメラン to イノ, ゴン
      イノ: HP-21 (299/440)
      ゴン: HP-19 (217/400)
   6T:      イノ299/440 |      ゴン217/400 |      ガ 20/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム64838/65000
    ガ: 防御
    カシム: 様子を見る
    ゴン: 攻撃 to マ
      マ: HP-20 ( 38/ 58)
    イノ: 武器を振り回す to ガ
      ガ: HP-20 (  0/ 59)
    マ: 奇跡の石 to 主
    主: ブーメラン to イノ, ゴン
      イノ: HP-22 (277/440)
      ゴン: HP-16 (201/400)
   7T:      イノ277/440 |      ゴン201/400 | [死 ]ガ  0/ 59 |      主 82/ 82 |      マ 38/ 58 |      カシム64838/65000
    ゴン: 攻撃 to 主
      主: HP-23 ( 59/ 82)
    イノ: 武器を振り回す to 主
      主: HP-33 ( 26/ 82)
    カシム: 攻撃 to イノ
      イノ: HP-28 (249/440)
    マ: 奇跡の石 to 主
      主: HP+38 ( 64/ 82)
    主: 世界樹の葉 to ガ
      ガ: HP+59 ( 59/ 59)
   8T:      イノ249/440 |      ゴン201/400 |      ガ 59/ 59 |      主 64/ 82 |      マ 38/ 58 |      カシム64838/65000
    ガ: 防御
    イノ: 武器を振り回す to カシム
      カシム: HP-43 (64795/65000)
    カシム: 様子を見る
    ゴン: 攻撃 to ガ
      ガ: HP-14 ( 45/ 59)
    マ: 奇跡の石 to マ
      マ: HP+34 ( 58/ 58)
    主: 薬草 to 主
      主: HP+37 ( 82/ 82)
   9T:      イノ249/440 |      ゴン201/400 |      ガ 45/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム64795/65000
    ガ: 防御
    イノ: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-42 (  3/ 59)
    ゴン: 攻撃 to ガ
      ガ: HP-13 (  0/ 59)
    カシム: 斬りつける to イノ
      イノ: HP-33 (216/440)
    マ: 奇跡の石 to マ
    主: ブーメラン to イノ, ゴン
      イノ: HP-24 (192/440)
      ゴン: HP-19 (182/400)
  10T:      イノ192/440 |      ゴン182/400 | [死 ]ガ  0/ 59 |      主 82/ 82 |      マ 58/ 58 |      カシム64795/65000
    主: 防御
    イノ: 攻撃 to マ
      マ: HP-26 ( 32/ 58)
    ゴン: 攻撃 to カシム
      カシム: HP-30 (64765/65000)
    カシム: 攻撃 to イノ
      イノ: HP-26 (166/440)
    マ: 世界樹の葉 to ガ
      ガ: HP+59 ( 59/ 59)
  11T:      イノ166/440 |      ゴン182/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 32/ 58 |      カシム64765/65000
    ガ: 防御
    ゴン: 攻撃 to 主
      主: HP-24 ( 58/ 82)
    イノ: 砂煙 to ガ, 主, マ, カシム
      ガ: +[暗5]
      カシム: +[暗5]
    カシム: 斬りつける to イノ
      missed to イノ
    マ: 奇跡の石 to マ
      マ: HP+36 ( 58/ 58)
    主: ブーメラン to イノ, ゴン
      イノ: HP-23 (143/440)
      ゴン: HP-16 (166/400)
  12T:      イノ143/440 |      ゴン166/400 | [暗5]ガ 59/ 59 |      主 58/ 82 |      マ 58/ 58 | [暗4]カシム64765/65000
    ガ: 防御
    ゴン: 攻撃 to ガ
      ガ: HP-13 ( 46/ 59)
    カシム: 様子を見る
    イノ: 痛恨の一撃(攻撃×2.5) to 主
      主: HP-67 (  0/ 82)
    マ: 奇跡の石 to マ
  13T:      イノ143/440 |      ゴン166/400 | [暗4]ガ 46/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 | [暗3]カシム64765/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: HP-18 ( 28/ 59)
    カシム: 攻撃 to イノ
      missed to イノ
    ゴン: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-72 (64693/65000)
    マ: 奇跡の石 to ガ
      ガ: HP+35 ( 59/ 59)
  14T:      イノ143/440 |      ゴン166/400 | [暗3]ガ 59/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 | [暗2]カシム64693/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: HP-16 ( 43/ 59)
    ゴン: 攻撃 to ガ
      ガ: HP-13 ( 30/ 59)
    カシム: 様子を見る
    マ: 奇跡の石 to マ
  15T:      イノ143/440 |      ゴン166/400 | [暗2]ガ 30/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 | [暗1]カシム64693/65000
    ガ: 防御
    ゴン: 爪できりさく to ガ
      ガ: HP-16 ( 14/ 59)
    イノ: 攻撃 to マ
      マ: evaded
    カシム: 斬りつける to ゴン
      missed to ゴン
    マ: 奇跡の石 to ガ
      ガ: HP+33 ( 47/ 59)
  16T:      イノ143/440 |      ゴン166/400 | [暗1]ガ 47/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64693/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: evaded
    ゴン: 攻撃 to マ
      マ: HP-21 ( 37/ 58)
    カシム: 攻撃 to イノ
      イノ: HP-27 (116/440)
    マ: 奇跡の石 to ガ
      ガ: HP+36 ( 59/ 59)
  17T:      イノ116/440 |      ゴン166/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 37/ 58 |      カシム64693/65000
    ガ: 防御
    ゴン: 攻撃 to ガ
      ガ: HP-13 ( 46/ 59)
    カシム: 斬りつける to イノ
      イノ: HP-32 ( 84/440)
    イノ: 武器を振り回す to ガ
      ガ: HP-21 ( 25/ 59)
    マ: 奇跡の石 to マ
      マ: HP+31 ( 58/ 58)
  18T:      イノ 84/440 |      ゴン166/400 |      ガ 25/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64693/65000
    ガ: 防御
    カシム: 様子を見る
    イノ: 攻撃 to カシム
      カシム: HP-33 (64660/65000)
    ゴン: 攻撃 to ガ
      ガ: HP-13 ( 12/ 59)
    マ: 奇跡の石 to ガ
      ガ: HP+39 ( 51/ 59)
  19T:      イノ 84/440 |      ゴン166/400 |      ガ 51/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64660/65000
    ガ: 防御
    イノ: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-90 (64570/65000)
    ゴン: 攻撃 to ガ
      ガ: HP-14 ( 37/ 59)
    カシム: 攻撃 to ゴン
      ゴン: HP-27 (139/400)
    マ: 奇跡の石 to ガ
      ガ: HP+37 ( 59/ 59)
  20T:      イノ 84/440 |      ゴン139/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64570/65000
    ガ: 防御
    ゴン: 爪できりさく to マ
      マ: HP-26 ( 32/ 58)
    イノ: 攻撃 to ガ
      ガ: HP-16 ( 43/ 59)
    カシム: 様子を見る
    マ: 奇跡の石 to マ
      マ: HP+35 ( 58/ 58)
  21T:      イノ 84/440 |      ゴン139/400 |      ガ 43/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64570/65000
    ガ: 防御
    カシム: 斬りつける to ゴン
      ゴン: HP-35 (104/400)
    イノ: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-82 (64488/65000)
    ゴン: 攻撃 to マ
      マ: HP-22 ( 36/ 58)
    マ: 奇跡の石 to ガ
      ガ: HP+39 ( 59/ 59)
  22T:      イノ 84/440 |      ゴン104/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 36/ 58 |      カシム64488/65000
    ガ: 防御
    ゴン: 攻撃 to ガ
      ガ: HP-14 ( 45/ 59)
    カシム: 攻撃 to ゴン
      ゴン: HP-29 ( 75/400)
    イノ: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-46 (  0/ 59)
    マ: 奇跡の石 to マ
      マ: HP+34 ( 58/ 58)
  23T:      イノ 84/440 |      ゴン 75/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 58/ 58 |      カシム64488/65000
    マ: 防御
    カシム: 斬りつける to イノ
      イノ: HP-32 ( 52/440)
    イノ: 攻撃 to カシム
      カシム: HP-32 (64456/65000)
    ゴン: 攻撃 to マ
      マ: HP-11 ( 47/ 58)
  24T:      イノ 52/440 |      ゴン 75/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 47/ 58 |      カシム64456/65000
    マ: 防御
    イノ: 武器を振り回す to カシム
      カシム: HP-43 (64413/65000)
    ゴン: 攻撃 to マ
      マ: HP-10 ( 37/ 58)
    カシム: 様子を見る
  25T:      イノ 52/440 |      ゴン 75/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 37/ 58 |      カシム64413/65000
    マ: 防御
    ゴン: 攻撃 to マ
      マ: HP-9 ( 28/ 58)
    カシム: 攻撃 to ゴン
      ゴン: HP-26 ( 49/400)
    イノ: 攻撃 to マ
      マ: evaded
  26T:      イノ 52/440 |      ゴン 49/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 28/ 58 |      カシム64413/65000
    マ: 防御
    イノ: 攻撃 to マ
      マ: HP-12 ( 16/ 58)
    ゴン: 攻撃 to カシム
      カシム: HP-29 (64384/65000)
    カシム: 様子を見る
  27T:      イノ 52/440 |      ゴン 49/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 16/ 58 |      カシム64384/65000
    マ: 防御
    ゴン: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-70 (64314/65000)
    イノ: 攻撃 to カシム
      カシム: HP-38 (64276/65000)
    カシム: 斬りつける to イノ
      イノ: HP-35 ( 17/440)
  28T:      イノ 17/440 |      ゴン 49/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 16/ 58 |      カシム64276/65000
    マ: 防御
    カシム: 攻撃 to ゴン
      ゴン: HP-26 ( 23/400)
    イノ: 攻撃 to カシム
      カシム: HP-33 (64243/65000)
    ゴン: 尻尾 to マ
      マ: HP-11 (  5/ 58)
  29T:      イノ 17/440 |      ゴン 23/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ  5/ 58 |      カシム64243/65000
    イノ: 武器を振り回す to マ
      マ: HP-33 (  0/ 58)
defeat      イノ 17/440 |      ゴン 23/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 | [死 ]マ  0/ 58 |      カシム64243/65000
```

## ToDo
- [ ] 戦術をちゃんとする
  - [ ] 先読み葉っぱ
  - [ ] イノゴン片方が落ちた場合
- [ ] 汚いコードをちゃんとする
- [ ] カシムHP自動回復
- [ ] けった1249
- [ ] おかかメシさんの打打石
- [ ] 奴隷先輩1250
